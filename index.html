<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>الآلة الحاسبة</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f5f5f5;
    }
    h2 {
        text-align: center;
        margin-bottom: 20px;
    }
    label {
        font-weight: bold;
    }
    input[type="number"] {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
    }
    button {
        background-color: #4CAF50;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-right: 10px;
    }
    button:hover {
        background-color: #45a049;
    }
    table {
        border-collapse: collapse;
        width: 100%;
        margin-top: 20px;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }
    th {
        background-color: #4CAF50;
        color: white;
    }
    #result {
        font-size: 18px;
        font-weight: bold;
        margin-top: 20px;
    }
    #actions {
        margin-top: 20px;
    }
</style>
</head>
<body>

<h2>الآلة الحاسبة</h2>

<div>
    <label for="a">أدخل قيمة للأدوية المصروفة:</label>
    <input type="number" id="a">
</div>

<div>
    <label for="b">أدخل قيمة للأدوية الموجودة:</label>
    <input type="number" id="b">
</div>

<div>
    <label for="c">أدخل قيمة لليدجر:</label>
    <input type="number" id="c">
</div>

<div id="actions">
    <button onclick="calculate()">حساب</button>
    <button onclick="clearTable()">مسح الجدول</button>
    <button onclick="saveAsPDF()">حفظ كملف PDF</button>
</div>

<p id="result"></p>

<table id="resultsTable">
    <thead>
        <tr>
            <th>الاسم</th>
            <th>الأدوية المصروفة</th>
            <th>الأدوية الموجودة</th>
            <th>اليدجر</th>
            <th>النتيجة</th>
        </tr>
    </thead>
    <tbody id="tableBody">
    </tbody>
</table>

<script>
// Load table data from local storage
document.addEventListener('DOMContentLoaded', function() {
    var tableData = JSON.parse(localStorage.getItem('tableData'));
    if (tableData) {
        var tableBody = document.getElementById('tableBody');
        tableData.forEach(function(rowData) {
            var row = document.createElement('tr');
            rowData.forEach(function(cellData) {
                var cell = document.createElement('td');
                cell.textContent = cellData;
                row.appendChild(cell);
            });
            tableBody.appendChild(row);
        });
    }
});

function calculate() {
    var a = parseFloat(document.getElementById('a').value);
    var b = parseFloat(document.getElementById('b').value);
    var c = parseFloat(document.getElementById('c').value);
    var result = c - (a + b);
    document.getElementById('result').innerHTML = "النتيجة: " + result;

    var name = prompt("أدخل اسمك:");
    if (name != null) {
        var table = document.getElementById("resultsTable").getElementsByTagName('tbody')[0];
        var newRow = table.insertRow(table.rows.length);
        var cell1 = newRow.insertCell(0);
        var cell2 = newRow.insertCell(1);
        var cell3 = newRow.insertCell(2);
        var cell4 = newRow.insertCell(3);
        var cell5 = newRow.insertCell(4);
        cell1.textContent = name;
        cell2.textContent = a;
        cell3.textContent = b;
        cell4.textContent = c;
        cell5.textContent = result;
        
        // Save table data to local storage
        var tableData = [];
        var rows = document.getElementById('tableBody').getElementsByTagName('tr');
        for (var i = 0; i < rows.length; i++) {
            var rowData = [];
            var cells = rows[i].getElementsByTagName('td');
            for (var j = 0; j < cells.length; j++) {
                rowData.push(cells[j].textContent);
            }
            tableData.push(rowData);
        }
        localStorage.setItem('tableData', JSON.stringify(tableData));
    }
}

function clearTable() {
    localStorage.removeItem('tableData');
    document.getElementById('tableBody').innerHTML = '';
}

function saveAsPDF() {
    // Clone the table element
    var tableClone = document.getElementById("resultsTable").cloneNode(true);
    
    // Create a new window with the cloned table
    var win = window.open('', '_blank');
    win.document.write('<html><head><title>Table PDF</title></head><body>');
    win.document.write('<style>table {border-collapse: collapse; width: 100%;} th, td {border: 1px solid #dddddd; text-align: left; padding: 8px;} th {background-color: #f2f2f2;}</style>');
    win.document.write('<h2>Table</h2>');
    win.document.write(tableClone.outerHTML);
    win.document.write('</body></html>');
    
    // Close the document
    win.document.close();
    
    // Print the window
    win.print();
}
</script>

</body>
</html>
